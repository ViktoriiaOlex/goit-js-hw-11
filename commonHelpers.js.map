{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    form: document.querySelector('.search-form'),\n    input: document.querySelector('.input-form'),\n    gallery: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader-container'),\n    searchBtn: document.querySelector('.search-btn'),\n  };\n  \n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '42030436-f44bf17f2fc4b636ae2b8b7a9';\n  \n  refs.form.addEventListener('submit', event => {\n    event.preventDefault();\n    const query = refs.form.query.value.trim();\n  \n    if (!query) {\n      createMessage(\n        `The search field can't be empty! Please, enter your request!`\n      );\n      return;\n    }\n    const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n  \n    fetchImages(url)\n      .then(data => {\n        if (data.hits.length === 0) {\n          createMessage(\n            `Sorry, there are no images matching your search query. Please, try again!`\n          );\n          showLoader(false);\n        }\n  \n        refs.gallery.innerHTML = createMarkup(data.hits);\n\n        showLoader(false);\n\n        const simplyGallery = new SimpleLightbox('.gallery-item a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n        refs.form.reset();\n      })\n      .catch(error => console.error(error));\n  });\n  \n  function fetchImages(url) {\n  \n    showLoader(true);\n\n    return fetch(url).then(resp => {\n      if (!resp.ok) {\n        throw new Error(resp.ststusText);\n      }\n      return resp.json();\n    });\n  }\n  \n  function createMarkup(hits) {\n    return hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) =>\n          `<li class=\"gallery-item\">\n\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\"\n        alt=\"${tags}\"\n      />\n\n      <p class=\"gallery-descr\">Likes: <span class=\"descr-span\">${likes}</span> \n      Views: <span class=\"descr-span\">${views}</span> \n      Comments: <span class=\"descr-span\">${comments}</span> \n      Downloads: <span class=\"descr-span\">${downloads}</span></p>\n\n    </a>\n  </li>`\n      )\n      .join('');\n  }\n  \n  function createMessage(message) {\n    iziToast.show({\n      class: 'error-svg',\n      position: 'topRight',\n      icon: 'error-svg',\n      message: message,\n      maxWidth: '432',\n      messageColor: '#fff',\n      messageSize: '16px',\n      backgroundColor: '#EF4040',\n      close: false,\n      closeOnClick: true,\n    });\n  }\n  \n  function showLoader(state = true) {\n    refs.loader.style.display = !state ? 'none' : 'inline-block';\n    refs.searchBtn.disabled = state;\n  }\n"],"names":["refs","BASE_URL","API_KEY","event","query","createMessage","url","fetchImages","data","showLoader","createMarkup","SimpleLightbox","error","resp","hits","webformatURL","largeImageURL","tags","likes","views","comments","downloads","message","iziToast","state"],"mappings":"6vBAUA,MAAMA,EAAO,CACT,KAAM,SAAS,cAAc,cAAc,EAC3C,MAAO,SAAS,cAAc,aAAa,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,mBAAmB,EAClD,UAAW,SAAS,cAAc,aAAa,CACnD,EAEQC,EAAW,2BACXC,EAAU,qCAEhBF,EAAK,KAAK,iBAAiB,SAAUG,GAAS,CAC5CA,EAAM,eAAc,EACpB,MAAMC,EAAQJ,EAAK,KAAK,MAAM,MAAM,OAEpC,GAAI,CAACI,EAAO,CACVC,EACE,8DACR,EACM,MACD,CACD,MAAMC,EAAM,GAAGL,SAAgBC,OAAaE,4DAE5CG,EAAYD,CAAG,EACZ,KAAKE,GAAQ,CACRA,EAAK,KAAK,SAAW,IACvBH,EACE,2EACZ,EACUI,EAAW,EAAK,GAGlBT,EAAK,QAAQ,UAAYU,EAAaF,EAAK,IAAI,EAE/CC,EAAW,EAAK,EAEM,IAAIE,EAAe,kBAAmB,CAC1D,aAAc,MACd,aAAc,GACxB,CAAS,EACDX,EAAK,KAAK,OAClB,CAAO,EACA,MAAMY,GAAS,QAAQ,MAAMA,CAAK,CAAC,CAC1C,CAAG,EAED,SAASL,EAAYD,EAAK,CAExB,OAAAG,EAAW,EAAI,EAER,MAAMH,CAAG,EAAE,KAAKO,GAAQ,CAC7B,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAClB,CAAK,CACF,CAED,SAASH,EAAaI,EAAM,CAC1B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA,oCAE0BL;AAAA;AAAA;AAAA,eAGrBD;AAAA,eACAE;AAAA;AAAA;AAAA,iEAGkDC;AAAA,wCACzBC;AAAA,2CACGC;AAAA,4CACCC;AAAA;AAAA;AAAA,QAIrC,EACA,KAAK,EAAE,CACX,CAED,SAAShB,EAAciB,EAAS,CAC9BC,EAAS,KAAK,CACZ,MAAO,YACP,SAAU,WACV,KAAM,YACN,QAASD,EACT,SAAU,MACV,aAAc,OACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,EACpB,CAAK,CACF,CAED,SAASb,EAAWe,EAAQ,GAAM,CAChCxB,EAAK,OAAO,MAAM,QAAWwB,EAAiB,eAAT,OACrCxB,EAAK,UAAU,SAAWwB,CAC9B"}